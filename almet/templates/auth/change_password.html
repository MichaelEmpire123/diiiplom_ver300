{% extends 'base.html' %}

{% block title %}–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-4">
        <div class="card mt-4">
            <div class="card-body" style="padding:20px;">

                <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link a_1 {% if request.path == '/profile/' %}active{% endif %}" href="{% url 'profile' %}">–ü—Ä–æ—Ñ–∏–ª—å</a>
                        </li>
                    <!-- –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
                    {% if user.is_staff or user.is_superuser %}
                        <li class="nav-item">
                            <a class="nav-link a_1 {% if request.path == '/admin/' %}active{% endif %}" href="/admin">–ê–¥–º–∏–Ω–∫–∞ Django</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link a_1 {% if request.path == '/admin_categories/' %}active{% endif %}" href="{% url 'admin_categories' %}">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ–±—Ä–∞—â–µ–Ω–∏–π</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link a_1 {% if request.path == '/admin_users/' %}active{% endif %}" href="{% url 'admin_users' %}">–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link a_1 {% if request.path == '/admin_create_service/' %}active{% endif %}" href="{% url 'admin_create_service' %}">–°–æ–∑–¥–∞—Ç—å –≥–æ—Ä–æ–¥—Å–∫—É—é —Å–ª—É–∂–±—É</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link a_1 {% if request.path == '/admin_create_employee/' %}active{% endif %}" href="{% url 'admin_create_employee' %}">–°–æ–∑–¥–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –≥–æ—Ä–æ–¥—Å–∫–æ–π —Å–ª—É–∂–±—ã</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link a_1 {% if request.path == '/admin_all_appeals/' %}active{% endif %}" href="{% url 'admin_all_appeals' %}">–í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è</a>
                        </li>
                    {% endif %}

                    <!-- –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –∂–∏—Ç–µ–ª—è -->
                    {% if user.id_citizen %}
                        <li class="nav_item">
                            <a href="{% url 'update_profile' %}" class="nav-link a_1 {% if request.path == '/update_profile/' %}active{% endif %}">–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
                        </li>
                        <li class="nav_item">
                            <a href="{% url 'change_password' %}" class="nav-link a_1 {% if request.path == '/change_password/' %}active{% endif %}">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link a_1 {% if request.path == '/create_appeal/' %}active{% endif %}" href="{% url 'create_appeal' %}">–ü–æ–¥–∞—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏–µ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link a_1 {% if request.path == '/view_appeals/' %}active{% endif %}" href="{% url 'view_appeals' %}">–ú–æ–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è</a>
                        </li>
                    {% endif %}

                    <!-- –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ -->
                    {% if user.id_sotrudnik %}
                        <li class="nav-item">
                            <a class="nav-link a_1 {% if request.path == '/employee_appeals/' %}active{% endif %}" href="{% url 'employee_appeals' %}">–û–±—Ä–∞—â–µ–Ω–∏—è –∫ —Å–ª—É–∂–±–µ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link a_1 {% if request.path == '/create_report/' %}active{% endif %}" href="{% url 'create_report' %}">–°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>


    <div class="col-md-6">
        <h2 class="text-center">–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h2>
        <form method="post" action="{% url 'change_password' %}" class="mt-4">
            {% csrf_token %}
            <div class="mb-3">
                <label for="old_password" class="form-label">–°—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å</label>
                <div class="input-group">
                    <input type="password" class="form-control" id="old_password" name="old_password" required>
                    <button type="button" class="btn btn-outline-secondary" id="togglePassword" onclick="togglePasswordVisibility('old_password', 'togglePassword')">üëÅÔ∏è‚Äçüó®Ô∏è</button>
                </div>
            </div>
            <div class="mb-3">
                <label for="new_password" class="form-label">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                <div class="input-group">
                    <input type="password" class="form-control" id="new_password" name="new_password" required>
                    <button type="button" class="btn btn-outline-secondary" id="togglePassword" onclick="togglePasswordVisibility('new_password', 'togglePassword')">üëÅÔ∏è‚Äçüó®Ô∏è</button>
                </div>
            </div>
            <div class="mb-3">
                <label for="confirm_password" class="form-label">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                <div class="input-group">
                    <input type="password" class="form-control" id="confirm_password" name="confirm_password" required>
                    <button type="button" class="btn btn-outline-secondary" id="togglePassword" onclick="togglePasswordVisibility('confirm_password', 'togglePassword')">üëÅÔ∏è‚Äçüó®Ô∏è</button>
                </div>
            </div>
            <button type="submit" class="btn btn-primary">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
        </form>
    </div>
</div>

<style>
    .nav-link.active {
        font-weight: bold;
        color: #007bff !important;
        background-color: #f8f9fa;
        border-radius: 5px;
    }

    .a_1 {
        color: #333;
        padding: 8px 12px;
        margin: 4px 0;
        text-decoration: none;
    }

    .a_1:hover {
        background-color: #f8f9fa;
        border-radius: 5px;
    }

    .card {
        border: 1px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .card-title {
        font-size: 1.25rem;
        margin-bottom: 1rem;
    }
</style>

<style>
    /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—ã */
    .form-control {
        border-radius: 8px;
        border: 1px solid #ddd;
        padding: 10px;
        font-size: 1rem;
    }

    .form-control:focus {
        border-color: #007bff;
        box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
    }

    .form-label {
        font-weight: 500;
        margin-bottom: 5px;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ */
    .btn-primary {
        background-color: #007bff;
        border: none;
        border-radius: 8px;
        padding: 10px;
        font-size: 1rem;
        transition: background-color 0.3s ease;
    }

    .btn-primary:hover {
        background-color: #0056b3;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Å—ã–ª–∫–∏ "–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å" */
    a {
        color: #007bff;
        text-decoration: none;
    }

    a:hover {
        text-decoration: underline;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ */
    .card {
        border: 1px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        padding: 20px;
    }

    /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
    .text-center {
        text-align: center;
    }

    /* –û—Ç—Å—Ç—É–ø—ã */
    .mt-4 {
        margin-top: 1.5rem;
    }

    .mb-3 {
        margin-bottom: 1rem;
    }

    .mt-3 {
        margin-top: 1rem;
    }
</style>

<script>
    function togglePasswordVisibility(inputId, buttonId) {
        const input = document.getElementById(inputId);
        const button = document.getElementById(buttonId);
        if (input.type === "password") {
            input.type = "text";
            button.innerHTML = "üëÅÔ∏è";
        } else {
            input.type = "password";
            button.innerHTML = "üëÅÔ∏è‚Äçüó®Ô∏è";
        }
    }
</script>
{% endblock %}